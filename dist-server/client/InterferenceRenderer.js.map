{"version":3,"sources":["../../src/client/InterferenceRenderer.js"],"names":["paletteTable","bg","c1","c2","c3","c4","animLengths","eggSpawn","eggBreak","eggNote","transportSyncCount","game","client","canvas","ctx","w","h","leftViewBound","rightViewBound","time","players","playerId","thisPlayer","graphicNotes","eggs","prevNotestack","prevRhythmstack","InterferenceRenderer","gameEngine","clientEngine","document","createElement","getContext","lineWidth","width","window","innerWidth","height","innerHeight","body","insertBefore","getElementById","addEventListener","setRendererSize","t","dt","room","syncClient","getSyncTime","world","queryObject","performanceView","number","playerWidth","queryObjects","instanceType","Performer","length","Egg","palette","transport","state","transportSyncInterval","seconds","clearRect","save","drawPlayers","drawNoteGraphics","drawEggs","drawImage","restore","n","p","i","x","fillColor","fillRect","fillStyle","fillTriangle","egg","perc","drawEggPercNote","bass","drawEggBassNote","melody","drawEggMelodyNote","leftBound","eggRadius","rightBound","e","position","scale","mapToRange","animFrames","spawn","strokeStyle","gamePos","quantizedPosition","y","pos","gamePositionToCanvasPosition","playerHeight","hp","ellipse","gameXDimToCanvasXDim","gameYDimToCanvasYDim","Math","PI","drawBrokenEgg","playerCellToCanvasPosition","cell","sequence","range","dimX","dimY","animFrame","c","layer","duration","step","currentStep","gameX","gameY","canvasX","floor","canvasY","cellX","cellY","cellsXPerPlayer","cellsYPerPlayer","val","l1","h1","l2","h2","radiusX","radiusY","stroke","gapX","break","gapY","which","rotation","startAngle","endAngle","beginPath","fill","x1","y1","x2","y2","x3","y3","moveTo","lineTo","closePath","Renderer"],"mappings":"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","sourcesContent":["import { Renderer, TwoVector } from 'lance-gg';\nimport Performer from '../common/Performer';\nimport Egg from '../common/Egg';\nimport { Frequency } from 'tone';\n\nconst paletteTable = {\n    'rain': {   \n        bg: '#3e2f5b', \n        c1: '#d7dedc',\n        c2: '#706563',\n        c3: '#457eac',\n        c4: '#748386' \n    },\n    'celeste': {   \n        bg: '#a5d8ff', \n        c1: '#ff8266',\n        c2: '#4381af',\n        c3: '#ac86b0',\n        c4: '#4b719c' \n    },\n    'pyre': {   \n        bg: '#a32323', \n        c1: '#2375a8',\n        c2: '#fbf6f7',\n        c3: '#f0ae62',\n        c4: '#011936' \n    },\n    'journey': {   \n        bg: '#fad68a', \n        c1: '#7f2819',\n        c2: '#a25a11',\n        c3: '#d5a962',\n        c4: '#fef8e8' \n    },\n    'kirby': {   \n        bg: '#a8c256', \n        c1: '#f4a4a7',\n        c2: '#e84c41',\n        c3: '#f9df6a',\n        c4: '#fa8334' \n    },\n    'default': {\n        bg: 'black',\n        c1: 'white',\n        c2: 'white',\n        c3: 'white',\n        c4: 'white'\n    }\n}\n\nconst animLengths = {\n    eggSpawn: 20,\n    eggBreak: 30,\n    eggNote: 10\n}\n\nlet transportSyncCount = 0;\nlet game = null;\nlet client = null;\nlet canvas = []\nlet ctx = [];\nlet w = 0;\nlet h = 0;\nlet leftViewBound = 0; // bounds of area to be rendered in game coordinates\nlet rightViewBound = 0;\nlet time = 0;\nlet players = []; \nlet playerId = 0;\nlet thisPlayer = null;\nlet graphicNotes = {};\nlet eggs = [];\n\nlet prevNotestack = '';\nlet prevRhythmstack = '';\n\nlet bg = paletteTable['default'].bg;\nlet c1 = paletteTable['default'].c1;\nlet c2 = paletteTable['default'].c2;\nlet c3 = paletteTable['default'].c3;\nlet c4 = paletteTable['default'].c4;\n\nexport default class InterferenceRenderer extends Renderer {\n\n    constructor(gameEngine, clientEngine) {\n        super(gameEngine, clientEngine);\n\n        game = this.gameEngine;\n        client = this.clientEngine;\n\n        this.canvas = document.createElement('canvas');\n        this.ctx = this.canvas.getContext('2d');\n\n        canvas[0] = document.createElement('canvas');\n        ctx[0] = canvas[0].getContext('2d');\n        ctx[0].lineWidth = 1;\n\n        canvas[1] = document.createElement('canvas');\n        ctx[1] = canvas[1].getContext('2d');\n        ctx[1].lineWidth = 1;\n\n        w = canvas[0].width = canvas[1].width = this.canvas.width = window.innerWidth;\n        h = canvas[0].height = canvas[1].height = this.canvas.height = window.innerHeight;\n\n        document.body.insertBefore(this.canvas, document.getElementById('logo'));\n\n        window.addEventListener('resize', ()=>{ this.setRendererSize(); });\n    }\n\n    draw(t, dt) {\n        super.draw(t, dt);\n\n        if (client.room === null) return\n\n        time = client.syncClient.getSyncTime();\n        playerId = game.playerId;\n        thisPlayer = game.world.queryObject({ playerId });\n        if (client.performanceView) {\n            players = [thisPlayer];\n            leftViewBound = thisPlayer.number * game.playerWidth;\n            rightViewBound = (thisPlayer.number + 1) * game.playerWidth;\n        }\n        else {\n            players = game.world.queryObjects({ instanceType: Performer });\n            leftViewBound = 0;\n            rightViewBound = players.length * game.playerWidth;\n        }\n\n        graphicNotes = client.graphicNotes;\n        eggs = game.world.queryObjects({ instanceType: Egg });\n\n        bg = paletteTable[thisPlayer.palette].bg;\n        c1 = paletteTable[thisPlayer.palette].c1;\n        c2 = paletteTable[thisPlayer.palette].c2;\n        c3 = paletteTable[thisPlayer.palette].c3;\n        c4 = paletteTable[thisPlayer.palette].c4;\n\n        if (client.transport.state === 'started') {\n            if (transportSyncCount >= game.transportSyncInterval) {\n                client.transport.seconds = time;\n                transportSyncCount = 0;\n                //console.log(client.transport.state);\n            }\n            transportSyncCount++\n        }\n        \n        // Clear the canvas\n        this.ctx.clearRect(0, 0, w, h);\n        ctx[0].clearRect(0, 0, w, h);\n        ctx[1].clearRect(0, 0, w, h);\n\n        // Transform the canvas\n        // Note that we need to flip the y axis since Canvas pixel coordinates\n        // goes from top to bottom, while physics does the opposite.\n        ctx[0].save();\n        ctx[1].save();\n        //ctx.scale(this.clientEngine.zoom, this.clientEngine.zoom);  // Zoom in and flip y axis\n        // Draw all things\n        this.drawPlayers();\n        this.drawNoteGraphics();\n        this.drawEggs();\n\n        /*()\n        ctx[1].fillStyle = c1;\n        ctx[1].font = \"20px Lucida Console\";\n        ctx[1].fillText(playerId, 50, 25);\n        ctx[1].fillText(time, 50, 50);\n        ctx[1].fillText(client.transport.position, 50, 75);\n        */\n        this.ctx.drawImage(canvas[0], 0, 0);\n        this.ctx.drawImage(canvas[1], 0, 0);\n\n        ctx[0].restore(); \n        ctx[1].restore();\n    }\n\n    drawPlayers() {\n        let n = players.length;\n        for (let p of players) {\n            let i = p.number - (leftViewBound / game.playerWidth);\n            let x = ((w / n) * i);\n            this.fillColor(p, 'bg', 0);\n            ctx[0].fillRect(x, 0, w / n, h / n)\n        }\n        let i = thisPlayer.number;\n        let x = (w / n) * (i + 0.5);\n        ctx[0].fillStyle = 'white';\n        this.fillTriangle(  x,                      (1.05 * h) / n, \n                            x - ((0.25 * w) / n),   (1.15 * h) / n,\n                            x + ((0.25 * w) / n),   (1.15 * h) / n, 0 );   \n    }\n\n    drawNoteGraphics() {\n        for (let n of graphicNotes.egg.perc) this.drawEggPercNote(n);\n        for (let n of graphicNotes.egg.bass) this.drawEggBassNote(n);\n        for (let n of graphicNotes.egg.melody) this.drawEggMelodyNote(n);\n    }\n\n    drawEggs() {\n        let leftBound = leftViewBound - game.eggRadius;\n        let rightBound = rightViewBound + game.eggRadius;\n        for (let e of eggs) {\n            if (leftBound < e.position.x && e.position.x < rightBound) {\n                let scale = this.mapToRange(e.animFrames.spawn, 0, animLengths.eggSpawn, 0.0, 1.0);\n                ctx[1].fillStyle = 'white';\n                ctx[1].strokeStyle = 'black';\n                let gamePos = game.quantizedPosition(e.position.x, e.position.y, 16, 9);\n                let pos = this.gamePositionToCanvasPosition(gamePos[0] + (game.playerWidth / 32), gamePos[1] + (game.playerHeight / 18));\n                if (e.hp > 0) {\n                    this.ellipse(pos[0], pos[1], \n                        this.gameXDimToCanvasXDim(game.eggRadius) * scale, \n                        this.gameYDimToCanvasYDim(game.eggRadius) * scale,\n                        0, 0, 2*Math.PI, true, 1);\n                }\n                else this.drawBrokenEgg(e, pos[0], pos[1], \n                    this.gameXDimToCanvasXDim(game.eggRadius), this.gameYDimToCanvasYDim(game.eggRadius), true, 1);\n            }\n        if (e.animFrames.spawn < animLengths.eggSpawn) e.animFrames.spawn++;\n        }\n    }\n\n    drawEggMelodyNote(n) {\n        let pos = this.playerCellToCanvasPosition(thisPlayer, n.cell.x, n.cell.y, n.sequence.length, n.sequence.range);\n        let dimX = this.gameXDimToCanvasXDim(game.playerWidth / n.sequence.length) / 2; \n        let dimY = this.gameYDimToCanvasYDim(game.playerHeight / n.sequence.range) / 2;\n        let x = pos[0] + dimX;\n        let y = pos[1] + dimY;\n        dimY *= this.mapToRange(n.animFrame, 0, animLengths.eggNote, n.sequence.range, 1);\n        dimX *= this.mapToRange(n.animFrame, 0, animLengths.eggNote, n.sequence.length, 1);\n        // color\n        let c = 'c2';\n        let layer = 1;\n        if (n.duration === '2n') {\n            c = 'c4';\n            layer = 0;\n        }\n        if (n.step === client.currentStep) c = 'c3'\n        this.fillColor(thisPlayer, c, layer);\n        this.ellipse(x, y, dimX, dimY, 0, 0, 2*Math.PI, false, layer);\n        if (n.animFrame < animLengths.eggNote) n.animFrame++;\n    }\n\n    drawEggBassNote(n) {\n        // generic position and dimensions of any egg sequence note\n        let pos = this.playerCellToCanvasPosition(thisPlayer, n.cell.x, n.cell.y, n.sequence.length, n.sequence.range);\n        let dimX = this.gameXDimToCanvasXDim(game.playerWidth / n.sequence.length); \n        let dimY = this.gameYDimToCanvasYDim(game.playerHeight / n.sequence.range);\n        ////////////////////////////////////////\n        // adjust generic values for animation\n        let x = pos[0];\n        let y = this.mapToRange(n.animFrame, 0, animLengths.eggNote, 0, pos[1]);\n        dimY *= this.mapToRange(n.animFrame, 0, animLengths.eggNote, n.sequence.range, 1);\n        // color\n        let c = 'c1';\n        let layer = 1;\n        if (n.duration === '2n') {\n            c = 'c3';\n            dimX *= n.sequence.length / 2;\n            layer = 0;\n        }\n        if (n.step === client.currentStep) c = 'c2'\n        this.fillColor(thisPlayer, c, layer);\n        ctx[layer].fillRect(x, y, dimX, dimY);\n        if (n.animFrame < animLengths.eggNote) n.animFrame++;\n    }\n\n    drawEggPercNote(n) {\n\n    }\n\n    drawEggPercNode(n) {\n        // generic position and dimensions of any egg sequence note\n        let pos = this.playerCellToCanvasPosition(thisPlayer, n.cell.x, n.cell.y, n.sequence.length, n.sequence.range);\n        let dimX = this.gameXDimToCanvasXDim(game.playerWidth / n.sequence.length); \n        let dimY = this.gameYDimToCanvasYDim((game.playerHeight / n.sequence.range));\n        ////////////////////////////////////////\n    }\n\n    setRendererSize() {\n        w = canvas[0].width = canvas[1].width = this.canvas.width = window.innerWidth;\n        h = canvas[0].height = canvas[1].height = this.canvas.height = window.innerHeight;\n    }\n\n    gamePositionToCanvasPosition(gameX, gameY) {\n        let canvasX = Math.floor(this.mapToRange(gameX, leftViewBound, rightViewBound, 0, w));\n        let canvasY = Math.floor(this.mapToRange(gameY, 0, game.playerHeight, 0, h / players.length)); \n        return [canvasX, canvasY];\n    }\n\n    gameXDimToCanvasXDim(gameX) {\n        return Math.floor(this.mapToRange(gameX, 0, game.playerWidth, 0, w / players.length));\n    }\n\n    gameYDimToCanvasYDim(gameY) {\n        return Math.floor(this.mapToRange(gameY, 0, game.playerHeight, 0, h / players.length));\n    }\n\n    playerCellToCanvasPosition(p, cellX, cellY, cellsXPerPlayer, cellsYPerPlayer) {\n        //let gameX = game.cellWidth * (cellX + (p.number * game.playerCellWidth));\n        //let gameY = game.cellHeight * cellY;\n        let gameX = (game.playerWidth / cellsXPerPlayer) * (cellX + (p.number * cellsXPerPlayer));\n        let gameY = (game.playerHeight / cellsYPerPlayer) * cellY;\n        return this.gamePositionToCanvasPosition(gameX, gameY);\n    }\n\n    mapToRange(val, l1, h1, l2, h2) {\n        return (l2 + (h2 - l2) * (val - l1) / (h1 - l1));\n    }\n\n    drawBrokenEgg(e, x, y, radiusX, radiusY, stroke, layer) {\n        let gapX = radiusX * (e.animFrames.break / animLengths.eggBreak);\n        let gapY = radiusY * (e.animFrames.break / animLengths.eggBreak);\n        this.ellipse(x+gapX, y-gapY, radiusX, radiusY, 0, 0, 0.5*Math.PI, stroke, layer)\n        this.ellipse(x-gapX, y-gapY, radiusX, radiusY, 0, 0.5*Math.PI, Math.PI, stroke, layer)\n        this.ellipse(x-gapX, y+gapY, radiusX, radiusY, 0, Math.PI, 1.5*Math.PI, stroke, layer)\n        this.ellipse(x+gapX, y+gapY, radiusX, radiusY, 0, 1.5*Math.PI, 2*Math.PI, stroke, layer)\n        if (e.animFrames.break < animLengths.eggBreak) e.animFrames.break++\n    }\n\n    fillColor(p, which, layer) {\n        if (paletteTable[p.palette]) {\n            ctx[layer].fillStyle = paletteTable[p.palette][which];\n        }  \n        else ctx[layer].fillStyle = paletteTable['default'][which];\n    }\n\n    ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, stroke, layer) {\n        ctx[layer].beginPath();\n        ctx[layer].ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle);\n        ctx[layer].fill();\n        if (stroke) ctx[layer].stroke();\n    }\n\n    fillTriangle(x1, y1, x2, y2, x3, y3, layer) {\n        ctx[layer].beginPath();\n        ctx[layer].moveTo(x1, y1);\n        ctx[layer].lineTo(x2, y2);\n        ctx[layer].lineTo(x3, y3);\n        ctx[layer].fill();\n        ctx[layer].closePath();\n    }\n\n}\n"],"file":"InterferenceRenderer.js"}